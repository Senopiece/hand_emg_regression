# General search for the best model on averaged dataset

method: bayes

metric:
  name: val_lmerr
  goal: minimize

early_terminate:
  type: hyperband
  min_iter: 70
  max_iter: 300

parameters:
  # model config

  batch_size:
    values: [32, 64, 128, 256]
  
  slmerr_k:
    values: [0.1, 1.0, 10.0]
  
  vel_k:
    values: [0.1, 1.0, 10.0]
  
  accel_k:
    values: [0.1, 1.0, 10.0]
  
  lr:
    values: [1e-2, 1e-3, 1e-4]
  
  l1:
    values: [1e-2, 1e-3, 1e-4, 1e-5]

  l2:
    values: [1e-2, 1e-3, 1e-4, 1e-5]
  
  emg_samples_per_frame:
    values: [16, 32, 64]
  
  slices:
    values: [4, 8, 16, 32, 128, 256]
  
  patterns:
    values: [4, 8, 16, 32, 128, 256]
  
  frames_per_window:
    values: [4, 8, 12, 16]
  
  slice_width:
    distribution: int_uniform
    min: 4
    max: 128
  
  mx_width:
    values: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8]

  mx_stride:
    values: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8]
  
  std_width:
    values: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8]

  std_stride:
    values: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8]
  
  synapse_features:
    values: [32, 64, 128, 512, 1024]
  
  muscle_features:
    values: [32, 64, 128, 512, 1024]
  
  predict_hidden_layer_size:
    values: [32, 64, 128, 512, 1024]

  # dataset config

  epoch_time_limit:
    value: 600 # 10 minutes
  
  val_split_length:
    value: 12 # in seconds
  
  val_segmentation:
    value: 4
  
  val_patch_length:
    value: 2 # in seconds
  
  val_sample_ratio:
    value: 0.1

  train_split_length:
    values: [600, 1200, 1800] # 10, 20, 30 minutes

  train_segmentation:
    values: [8, 16, 32, 64]

  train_patch_length:
    values: [1, 2, 3, 4] # in seconds
  
  patience:
    value: 50
  
  dataset_path:
    value: $rand:./datasets

command:
  - ${env}
  - ${interpreter}
  - -m
  - emg_hand_tracking.train
  - -n
  - ${args}
